{"ast":null,"code":"import _toConsumableArray from\"D:/webApp/react_chatapp/chat_app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/webApp/react_chatapp/chat_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{user}from\"../Join/Join\";import socketIo from\"socket.io-client\";import'./chat.css';import Message from'../Message/Message';import sendLogo from'../../images/send.png';import ReactScrollToBottom from\"react-scroll-to-bottom\";import closeIcon from\"../../images/closeIcon.png\";import Navbar from'../Navbar/Navbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ENDPOINT=\"http://localhost:5000/\";var socket;var Chat=function Chat(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setid=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var send=function send(){var message=document.getElementById('chatInput').value;socket.emit('message',{message:message,id:id});document.getElementById('chatInput').value=\"\";};useEffect(function(){socket=socketIo(ENDPOINT,{transports:['websocket']});socket.on('connect',function(){alert(\"connected\");setid(socket.id);});console.log(socket);socket.emit('joined',{user:user});socket.on('welcome',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message);});socket.on('userJoined',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message);});socket.on('leave',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message);});return function(){socket.emit('disconnected');socket.off();};},[]);useEffect(function(){socket.on('sendMessage',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message,data.id);});return function(){socket.off();};},[messages]);return/*#__PURE__*/_jsx(\"div\",{className:\"chatPage\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chatContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"C chat\"}),/*#__PURE__*/_jsx(\"a\",{href:\"./\",children:/*#__PURE__*/_jsx(\"img\",{src:closeIcon,alt:\"close\"})})]}),/*#__PURE__*/_jsx(ReactScrollToBottom,{className:\"chatBox\",children:messages.map(function(item){return/*#__PURE__*/_jsx(Message,{user:item.id===id?'':item.user,message:item.message,classs:item.id===id?'right':'left'});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBox\",children:[/*#__PURE__*/_jsx(\"input\",{onKeyPress:function onKeyPress(event){return event.key==='Enter'?send():null;},type:\"text\",id:\"chatInput\"}),/*#__PURE__*/_jsx(\"button\",{onClick:send,className:\"sendBtn\",children:/*#__PURE__*/_jsx(\"img\",{src:sendLogo,alt:\"send'\"})})]})]})});};export default Chat;","map":{"version":3,"names":["React","useEffect","useState","user","socketIo","Message","sendLogo","ReactScrollToBottom","closeIcon","Navbar","jsx","_jsx","jsxs","_jsxs","ENDPOINT","socket","Chat","_useState","_useState2","_slicedToArray","id","setid","_useState3","_useState4","messages","setMessages","send","message","document","getElementById","value","emit","transports","on","alert","console","log","data","concat","_toConsumableArray","off","className","children","href","src","alt","map","item","classs","onKeyPress","event","key","type","onClick"],"sources":["D:/webApp/react_chatapp/chat_app/src/components/Chat/Chat.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { user } from \"../Join/Join\";\r\nimport socketIo from \"socket.io-client\";\r\nimport './chat.css';\r\nimport Message from '../Message/Message';\r\nimport sendLogo from '../../images/send.png';                                                                                                                                                                                                                                                                                                              \r\nimport ReactScrollToBottom from \"react-scroll-to-bottom\"\r\nimport closeIcon from \"../../images/closeIcon.png\";\r\nimport Navbar from '../Navbar/Navbar';\r\nconst ENDPOINT=\"http://localhost:5000/\"\r\nlet socket;\r\nconst Chat = () => {\r\n  const[id,setid]=useState(\"\");\r\n  const[messages,setMessages]=useState([])\r\n  const send=()=>{\r\n    const message=document.getElementById('chatInput').value;\r\n    socket.emit('message',{message,id});\r\n    document.getElementById('chatInput').value=\"\";\r\n  }\r\n\r\n  useEffect(()=>{\r\n    socket=socketIo ( ENDPOINT,{transports:['websocket']})\r\n    socket.on('connect',()=>{\r\n        alert(\"connected\");\r\n        setid(socket.id);\r\n    })\r\n    console.log(socket);\r\n    socket.emit('joined',{user})\r\n\r\n    socket.on('welcome',(data)=>{\r\n      setMessages([...messages,data]);\r\n      console.log(data.user,data.message);\r\n    });\r\n    socket.on('userJoined',(data)=>{\r\n      setMessages([...messages,data]);\r\n      console.log(data.user,data.message);\r\n    })\r\n    socket.on('leave',(data)=>{\r\n      setMessages([...messages,data]);\r\n      console.log(data.user,data.message)\r\n    })\r\n    return()=>{ \r\n      socket.emit('disconnected');\r\n      socket.off();\r\n    }\r\n  },[]);\r\n  useEffect(()=>{\r\n    socket.on('sendMessage',(data)=>{\r\n      setMessages([...messages,data]);\r\n      console.log(data.user,data.message,data.id);\r\n    })\r\n    return()=>{\r\n     socket.off()\r\n    }\r\n  },[messages])\r\n    return (\r\n\r\n            <div className='chatPage'>\r\n      <div className='chatContainer'>\r\n        <div className='header'>\r\n          <h2>C chat</h2>\r\n          <a href=\"./\"><img src={closeIcon} alt=\"close\"/></a>\r\n        </div>\r\n            <ReactScrollToBottom className='chatBox'>\r\n              {messages.map((item)=><Message user={item.id===id?'':item.user} message={item.message} classs={item.id===id?'right':'left'}/>)}\r\n            </ReactScrollToBottom>\r\n                <div className='inputBox'>\r\n                    <input onKeyPress={(event)=>event.key==='Enter' ? send():null} type=\"text\" id='chatInput'/>\r\n                    <button  onClick={send} className='sendBtn'><img src={sendLogo} alt=\"send'\"/></button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n  )\r\n}\r\n\r\nexport default Chat\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}